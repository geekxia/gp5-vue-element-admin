(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9fa827e"],{"14ba":function(t,e,n){"use strict";n("aab2")},"1c3d":function(t,e,n){"use strict";n("9236")},"2af9":function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return x}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[n("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},i=[];n("513c");Math.easeInOutQuad=function(t,e,n,a){return t/=a/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function l(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,n){var a=r(),i=t-a,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var r=Math.easeInOutQuad(c,a,i,e);l(r),c<e?o(t):n&&"function"===typeof n&&n()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&s(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize,flag:!0}),this.autoScroll&&s(0,800)}}},u=c,d=(n("14ba"),n("5d22")),f=Object(d["a"])(u,a,i,!1,null,"7df84567",null),p=f.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qf-good-cate-select"},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"145px"},attrs:{placeholder:"品类筛选",clearable:""},model:{value:t.c,callback:function(e){t.c=e},expression:"c"}},t._l(t.cates,(function(t){return n("el-option",{key:t._id,attrs:{label:t.cate_zh,value:t.cate}})})),1)],1)},g=[],h=n("6abc"),b=n("52c1"),v={props:{value:{type:String,default:""}},data:function(){return{cate:""}},created:function(){this.$store.dispatch("good/getAllCates")},computed:Object(h["a"])(Object(h["a"])({},Object(b["b"])(["cates"])),{},{c:{get:function(){return this.cate||this.value},set:function(t){this.cate=t}}}),watch:{cate:function(){this.$emit("input",this.cate),this.$emit("change")}}},y=v,w=(n("1c3d"),Object(d["a"])(y,m,g,!1,null,"792d2f93",null)),_=w.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qf-img-upload"},[n("el-upload",{attrs:{action:t.$config.imgAction,name:t.name,"file-list":t.list,"list-type":"picture","on-success":t.imgSuccess,"before-upload":t.imgCheck,"on-change":t.imgChange,"on-remove":t.imgRemove,multiple:t.multiple,limit:t.limit},scopedSlots:t._u([{key:"tip",fn:function(){return[t._t("tip")]},proxy:!0}],null,!0)},[n("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("图片上传")])],1)],1)},$=[],C={props:{name:{type:String,default:"file"},multiple:{type:Boolean,default:!1},limit:{type:Number,default:9},value:{type:String,default:""}},data:function(){return{fileList:[]}},computed:{list:function(){return this.fileList.length>0?this.fileList:this.value?[{name:"",url:this.$config.imgBase+this.value}]:[]}},methods:{imgCheck:function(t){if(console.log("file",t),t.size>2097152)return this.$message.error("只支持2M以内的图片"),this.$emit("error"),!1},imgChange:function(t){console.log("file",t),this.fileList=[t]},imgRemove:function(t){this.$emit("input","")},imgSuccess:function(t,e,n){t&&t.data&&t.data.img&&this.$emit("input",t.data.img)}}},k=C,z=Object(d["a"])(k,S,$,!1,null,"1598f095",null),x=z.exports},4194:function(t,e,n){"use strict";var a=n("1c8b"),i=n("5dfd").find,o=n("258f"),l=n("ff9c"),r="find",s=!0,c=l(r);r in[]&&Array(1)[r]((function(){s=!1})),a({target:"Array",proto:!0,forced:s||!c},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},"7c68":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"商品名称",clearable:""},on:{clear:t.handleFilter},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.filter.name,callback:function(e){t.$set(t.filter,"name",e)},expression:"filter.name"}}),n("GoodCateSelect",{on:{change:t.handleFilter},model:{value:t.filter.cate,callback:function(e){t.$set(t.filter,"cate",e)},expression:"filter.cate"}}),n("el-date-picker",{staticClass:"filter-item",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.dateChange},model:{value:t.filter.date,callback:function(e){t.$set(t.filter,"date",e)},expression:"filter.date"}})],1),n("div",{staticClass:"qf-gl-table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.selectHandle}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"商品",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"qf-good-info"},[n("img",{attrs:{src:t.$config.imgBase+e.row.img,alt:""}}),n("div",{domProps:{textContent:t._s(e.row.name)}})])]}}])}),n("el-table-column",{attrs:{prop:"cate",align:"center",label:"品类"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{textContent:t._s(t.cate2Name(e.row.cate))}})]}}])}),n("el-table-column",{attrs:{prop:"desc",align:"center",label:"描述",sortable:"","sort-method":t.customSort}}),n("el-table-column",{attrs:{prop:"price",align:"center",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{textContent:t._s("￥"+e.row.price)}})]}}])}),n("el-table-column",{attrs:{prop:"create_time",align:"center",label:"上架时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{domProps:{textContent:t._s(t.$util.dateParse(e.row.create_time,"MM月DD日"))}}),n("div",{domProps:{textContent:t._s(t.$util.dateParse(e.row.create_time,"HH:mm"))}})]}}])}),n("el-table-column",{attrs:{prop:"hot",align:"center",label:"是否热销"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{textContent:t._s(e.row.hot?"是":"否")}})]}}])}),n("el-table-column",{attrs:{prop:"star",align:"center",label:"人气值",sortable:""}}),n("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.rowHandle(e.row,"edit")}}},[t._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.rowHandle(e.row,"del")}}},[t._v("删除")])]}}])})],1)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.removeAll}},[t._v(" 删除所选行 ")])],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.filter.page,limit:t.filter.size,"page-sizes":[2,4,6,8]},on:{"update:page":function(e){return t.$set(t.filter,"page",e)},"update:limit":function(e){return t.$set(t.filter,"size",e)},pagination:t.getList}})],1)},i=[],o=n("6abc"),l=(n("dbb3"),n("4194"),n("2eeb"),n("52c1")),r=n("2af9"),s={name:"GoodList",components:{Pagination:r["c"],GoodCateSelect:r["a"]},data:function(){return{filter:{page:1,size:2,name:"",date:"",cate:""},total:0,tableData:[]}},computed:Object(o["a"])({},Object(l["b"])(["cates"])),created:function(){this.getList()},methods:{getList:function(t){var e=this;t&&t.flag||(this.filter.page=1),this.$api.fetchGoodList(this.filter).then((function(t){console.log("商品列表",t);var n=t.list,a=t.total;e.tableData=n,e.total=a}))},cate2Name:function(t){var e=this.cates.find((function(e){return e.cate===t}));return e?e.cate_zh:""},handleFilter:function(){console.log("触发搜索filter",this.filter),this.getList()},dateChange:function(t){console.log("e",t),console.log("start time",this.$util.dateValue(t[0])),console.log("end time",this.$util.dateParse(t[1],"YYYY-MM-DD"))},selectHandle:function(t){console.log("select rows",t),this.rows=t},rowHandle:function(t,e){var n=this;"edit"===e?this.$router.push("/goods/edit/"+t._id):this.$api.fetchGoodDel({ids:t._id}).then((function(){n.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),n.getList()}))},removeAll:function(){var t=this;if(console.log("删除",this.rows),this.rows.length>0){var e="";this.rows.map((function(t){e+=";"+t._id})),this.$api.fetchGoodDel({ids:e}).then((function(){t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.getList()}))}},customSort:function(t,e){return t.desc.length>e.desc.length}}},c=s,u=n("5d22"),d=Object(u["a"])(c,a,i,!1,null,"0d6570ec",null);e["default"]=d.exports},9236:function(t,e,n){},aab2:function(t,e,n){}}]);